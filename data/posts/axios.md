## **ðŸ“š** Axios ë¼ì´ë¸ŒëŸ¬ë¦¬

- AxiosëŠ” ë¸Œë¼ìš°ì €, Node.jsë¥¼ ìœ„í•œ Promise(ES6) APIë¥¼ í™œìš©í•˜ëŠ” HTTP ë¹„ë™ê¸° í†µì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬ì´ë‹¤.
- ì‰½ê²Œ ë§í•´ì„œ ë°±ì—”ë“œëž‘ í”„ë¡ íŠ¸ì—”ë“œëž‘ í†µì‹ ì„ ì‰½ê²Œí•˜ê¸° ìœ„í•´ Ajaxì™€ ë”ë¶ˆì–´ ì‚¬ìš©í•œë‹¤.
- ì´ë¯¸ ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ëŠ” fetch apiê°€ ìžˆì§€ë§Œ, ajaxëŠ” ë§Žì€ ê¸°ëŠ¥ì„ ì§€ì›í•˜ê³  ì½”ë“œë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— axiosë¥¼ ë§Žì´ ì‚¬ìš©í•œë‹¤.

### ðŸ“š Axiosì˜ íŠ¹ì§•

- json ë³€í™˜ì„ ìžë™ìœ¼ë¡œ ì²˜ë¦¬ (request.json() ì„ í•´ì¤„ í•„ìš”ê°€ ì—†ìŒ. ë°”ë¡œ data í”„ë¡œí¼í‹°ì— ì ‘ê·¼ ê°€ëŠ¥)
- ìš”ì²­ì— ëŒ€í•œ timeout ê¸°ëŠ¥ì´ ì¡´ìž¬ (ì‘ë‹µì´ ì˜¤ê¸°ê¹Œì§€ ëŒ€ê¸°í•  ìµœëŒ€ ì‹œê°„ì„ ì„¤ì •í•  ìˆ˜ ìžˆìŒ)
- ìš”ì²­ ë° ì‘ë‹µì— ëŒ€í•œ ì¸í„°ì…‰íŠ¸ ê¸°ëŠ¥ ì¡´ìž¬ (ê¸°ë³¸ì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ í˜¹ì€ ì‘ë‹µì„ ë°›ì€ í›„ ì‹¤í–‰ë  ì½”ë“œë¥¼ ì§€ì •í•´ë†“ì„ ìˆ˜ ìžˆìŒ)

#### ðŸ§ axiosì™€ fetchì˜ ì°¨ì´

| **axios**                                       | **fetch**                                                      |
| ----------------------------------------------- | -------------------------------------------------------------- |
| ì¨ë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì„¤ì¹˜ê°€ í•„ìš”               | í˜„ëŒ€ ë¸Œë¼ìš°ì €ì— ë¹ŒíŠ¸ì¸ì´ë¼ ì„¤ì¹˜ í•„ìš” ì—†ìŒ                      |
| XSRF ë³´í˜¸ë¥¼ í•´ì¤€ë‹¤.                             | ë³„ë„ ë³´í˜¸ ì—†ìŒ                                                 |
| data ì†ì„±ì„ ì‚¬ìš©                                | body ì†ì„±ì„ ì‚¬ìš©                                               |
| dataëŠ” objectë¥¼ í¬í•¨í•œë‹¤                        | bodyëŠ” ë¬¸ìžì—´í™” ë˜ì–´ìžˆë‹¤                                       |
| statusê°€ 200ì´ê³  statusTextê°€ â€˜OKâ€™ì´ë©´ ì„±ê³µì´ë‹¤ | ì‘ë‹µê°ì²´ê°€ ok ì†ì„±ì„ í¬í•¨í•˜ë©´ ì„±ê³µì´ë‹¤                         |
| ìžë™ìœ¼ë¡œ JSONë°ì´í„° í˜•ì‹ìœ¼ë¡œ ë³€í™˜ëœë‹¤           | .json()ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.                                 |
| ìš”ì²­ì„ ì·¨ì†Œí•  ìˆ˜ ìžˆê³  íƒ€ìž„ì•„ì›ƒì„ ê±¸ ìˆ˜ ìžˆë‹¤.    | í•´ë‹¹ ê¸°ëŠ¥ ì¡´ìž¬ í•˜ì§€ì•ŠìŒ                                        |
| HTTP ìš”ì²­ì„ ê°€ë¡œì±Œìˆ˜ ìžˆìŒ                       | ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ì§€ ì•ŠìŒ                                       |
| download ì§„í–‰ì— ëŒ€í•´ ê¸°ë³¸ì ì¸ ì§€ì›ì„ í•¨         | ì§€ì›í•˜ì§€ ì•ŠìŒ                                                  |
| ì¢€ë” ë§Žì€ ë¸Œë¼ìš°ì €ì— ì§€ì›ë¨                     | Chrome 42+, Firefox 39+, Edge 14+, and Safari 10.1+ì´ìƒì— ì§€ì› |

### ðŸ’» Axios ì„¤ì¹˜

ì„¤ì¹˜ëŠ” ì•„ëž˜ì™€ ê°™ì´ ìž…ë ¥í•´ì„œ ì§„í–‰í•  ìˆ˜ ìžˆë‹¤. (ëª¨ë“ˆ ì´ë¦„ì´ axios)

```
#yarn
yarn add axios

#npm
npm install axios
```

ëª¨ë“ˆì´ê¸° ë•Œë¬¸ì—, í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´Â import ì²˜ë¦¬í•´ì•¼ í•œë‹¤.

```
import axios from 'axios'
```

### ðŸ“š Axios ê¸°ë³¸ ë¬¸ë²•

```
axios({
  url: "ì„œë²„ì£¼ì†Œ",
  method: "get", // POST, PUT, DELETE ë“±ì˜ ìš”ì²­ ìœ í˜• ì„ íƒ
  headers: {
    Authorization: ì¸ì¦ í† í° ë“±
  },
  data: ë¦¬í€˜ìŠ¤íŠ¸ ë°ì´í„°,
  timeout: ms ë‹¨ìœ„
});
```

- method ë¶€ë¶„ì—ëŠ” ë³´ë‚´ëŠ” ìš”ì²­ì˜ ìœ í˜•ì— ë”°ë¼ get, post, put, delete ì¤‘ í•˜ë‚˜ë¥¼ ëª…ì‹œí•  ìˆ˜ ìžˆë‹¤.
- data ë¶€ë¶„ì—ëŠ” post í˜¹ì€ put ìš”ì²­ì˜ ê²½ìš°, ë¦¬í€˜ìŠ¤íŠ¸ ë°ì´í„°ë¥¼ í¬í•¨ì‹œì¼œì„œ ë³´ë‚¼ ìˆ˜ ìžˆë‹¤.
- timeout ë¶€ë¶„ì—ëŠ” ëª…ì‹œí•œ ì‹œê°„ ì•ˆì— ìš”ì²­ì´ ì•ˆì˜¤ë©´ ì‹œê°„ ì´ˆê³¼ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìžˆë‹¤.

### ðŸ“š Axios ì‘ë‹µ ë°ì´í„°

```
response.data: {}, // ì„œë²„ê°€ ì œê³µí•œ ì‘ë‹µ(ë°ì´í„°)

response.status: 200, // HTTP ìƒíƒœ ì½”ë“œ (200~299 ì‚¬ì´ë©´ ìš”ì²­ ì„±ê³µ, 400~500 ì‚¬ì´ë¼ë©´ ìš”ì²­ ì‹¤íŒ¨)

response.statusText: 'OK',  // ì„œë²„ì—ì„œ ì „ë‹¬ëœ ìƒíƒœ ë©”ì„¸ì§€ (ok ë“±ì´ ì˜¬ ìˆ˜ ìžˆìŒ)

response.headers: {},  // ì‘ë‹µì˜ í—¤ë” ë¶€ë¶„

response.config: {}, // axios ìžì²´ì˜ ì„¤ì •

response.request: {}
// ì‘ë‹µì„ ìƒì„±í•œ request
// ë¸Œë¼ìš°ì €: XMLHttpRequest ì¸ìŠ¤í„´ìŠ¤
// Node.js: ClientRequest ì¸ìŠ¤í„´ìŠ¤(ë¦¬ë””ë ‰ì…˜)
```

### ðŸ“š Axios ë©”ì†Œë“œ

axiosë¥¼ íŽ¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ëª¨ë“  ìš”ì²­ ë©”ì†Œë“œëŠ” aliasesê°€ ì œê³µëœë‹¤.

- **GET**Â :Â axios.get(url\[, config\])
- **POST**Â :Â axios.post(url, data\[, config\])
- **PUT**Â :Â axios.put(url, data\[, config\])
- **DELETE**Â :Â axios.delete(url\[, config\])

#### ðŸ“¥Â  GET

get ë©”ì„œë“œì—ëŠ” 2ê°€ì§€ ìƒí™©ì´ í¬ê²Œ ì¡´ìž¬í•œë‹¤.

1.  ë‹¨ìˆœ ë°ì´í„°(íŽ˜ì´ì§€ ìš”ì²­, ì§€ì •ëœ ìš”ì²­) ìš”ì²­ì„ ìˆ˜í–‰í•  ê²½ìš°
2.  íŒŒë¼ë¯¸í„° ë°ì´í„°ë¥¼ í¬í•¨ì‹œí‚¤ëŠ” ê²½ìš° (ì‚¬ìš©ìž ë²ˆí˜¸ì— ë”°ë¥¸ ì¡°íšŒ)

```
async function getUser() {
  try {
    const response = await axios.get('/user', {
    	params: {
        ID: 12345
    });
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
```

ìœ„ì™€ ê°™ì´ ì˜µì…˜ì„ ì£¼ëŠ” ë°©ë²•ë„ ìžˆê³ , urlì— íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•˜ëŠ” ë°©ë²•ë„ ìžˆë‹¤.

#### ðŸ“¤Â  POST

post ë©”ì„œë“œì—ëŠ” ì¼ë°˜ì ìœ¼ë¡œÂ ë°ì´í„°ë¥¼ Message Bodyì— í¬í•¨ì‹œì¼œ ë³´ë‚¸ë‹¤.

ìœ„ì—ì„œ ë´¤ë˜ get ë©”ì„œë“œì—ì„œÂ paramsë¥¼ ì‚¬ìš©í•œ ê²½ìš°ì™€ ë¹„ìŠ·í•˜ê²Œ ìˆ˜í–‰ëœë‹¤.

```
async function uploadPost() {
  try {
    const response = await axios.post("url", {
		firstName: 'Seonju',
		lastName: 'Yoo'
    })
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
```

#### ðŸ—‘ï¸ DELETE

delete ë©”ì„œë“œëŠ” ì¼ë°˜ì ìœ¼ë¡œ bodyê°€ ë¹„ì–´ìžˆë‹¤.

REST ê¸°ë°˜ API í”„ë¡œê·¸ëž¨ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥ë˜ì–´ ìžˆëŠ” ë‚´ìš©ì„ ì‚­ì œí•˜ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

```
async function deletePost() {
  try {
    const response = await axios.delete('/user?ID=12345', {
    data: {
      post_id: 1,
      comment_id: 13,
      username: "foo"
    })
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
```

queryë‚˜ paramsê°€ ë§Žì•„ì ¸ì„œ í—¤ë”ì— ë§Žì€ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ì—†ì„ ë•ŒëŠ” ë‘ ë²ˆì§¸ ì¸ìžì— dataë¥¼ ì¶”ê°€í•´ì¤„ ìˆ˜ ìžˆë‹¤.

#### ðŸ“ PUT

ë°ì´í„°ë² ì´ìŠ¤ì— ì €ìž¥ë˜ì–´ ìžˆëŠ” ë‚´ìš©ì„ ê°±ì‹ (ìˆ˜ì •)í•˜ëŠ” ëª©ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

put ë©”ì„œë“œëŠ” ì„œë²„ ë‚´ë¶€ì ìœ¼ë¡œÂ get -> postÂ ê³¼ì •ì„ ê±°ì¹˜ê¸° ë•Œë¬¸ì— post ë©”ì„œë“œì™€ ë¹„ìŠ·í•œ í˜•íƒœì´ë‹¤.

```
async function editPost() {
  try {
    const response = await axios.put("url", {
        username: "",
        password: ""
    })
    console.log(response);
  } catch (error) {
    console.error(error);
  }
}
```

### ðŸ“ Axios ì „ì—­ ì„¤ì • (Config Defaults)

ëª¨ë“  ìš”ì²­ì— ì ìš©ë˜ëŠ” ì„¤ì •ì˜ default ê°’ì„ ì „ì—­ìœ¼ë¡œ ëª…ì‹œí•  ìˆ˜ ìžˆë‹¤.

ë³´í†µ ë°±ì—”ë“œ ì£¼ì†ŒëŠ” ê³ ì •ë˜ì–´ ìžˆê¸° ë•Œë¬¸ì—, í•´ë‹¹ ì£¼ì†Œë¥¼ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ëª…ì‹œí•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ë‹¤.

í•´ë‹¹ ì£¼ì†Œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì§€ì •í•´ë†“ê³ , ìš”ì²­ì„ ë³´ë‚¼ ë•Œ route ë¶€ë¶„ë§Œ ëª…ì‹œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìž‘ì„±í•˜ë©´ í›¨ì”¬ íš¨ìœ¨ì ìœ¼ë¡œ ì½”ë“œë¥¼ ìž‘ì„±í•  ìˆ˜ ìžˆë‹¤.

1\. í”„ë¡œì íŠ¸ í´ë”ì— .env íŒŒì¼ ìƒì„±

```
# .env
VITE_SERVER_URL='https://jsonplaceholder.typicode.com'
```

2\. axiosConfig.js íŒŒì¼ ë‚´ë¶€ì˜ axiosAPI ìˆ˜ì •

```
export const axiosAPI = axios.create({
    baseURL: import.meta.env.VITE_SERVER_URL,
})
```

ì„¤ì •ì´ ì™„ë£Œë˜ë©´ .env íŒŒì¼ì— ëª…ì‹œí•œ ì„œë²„ ì£¼ì†Œë¡œ API ìš”ì²­ì„ ë³´ë‚´ê²Œ ëœë‹¤.

3\. ì¸í„°ì…‰í„° í™œìš©í•˜ê¸°

```
axios.interceptors.request.use(request => {
    console.log(request);
    // request ê´€ë ¨í•´ì„œ ì„¤ì • ì§„í–‰
    return request;
}, error => {
    console.log(error);
    return Promise.reject(error);
});

axios.interceptors.response.use(
    (response) => {
    	// ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆì„ ë•Œì˜ ì„¤ì •ì§„í–‰
        if (response.status === 200 || response.status === 201) {
            return response.data
        }
        return response
    },
    (error) => {
        console.log(error)
        return Promise.reject(error)
    },
)
```

ì¸í„°ì…‰í„°ëŠ” ë§ê·¸ëŒ€ë¡œ ìš”ì²­ í˜¹ì€ ì‘ë‹µì„ ë³´ë‚´ëŠ” ê³¼ì •ì—ì„œ ìš”ì²­ í˜¹ì€ ì‘ë‹µì„ ê°€ë¡œì±„ê³  íŠ¹ì •í•œ ìž‘ì—…ì„ ìˆ˜ì •í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì´ë‹¤.

- request : ìœ ì € ì¸ì¦ ì •ë³´ ì¡´ìž¬ ì—¬ë¶€ì— ë”°ë¼ ìœ ì € ì¸ì¦ ì •ë³´ë¥¼ ìš”ì²­ì— í¬í•¨ì‹œí‚¤ê¸° ìœ„í•´ ì‚¬ìš©
- response : ë°ì´í„° íŒŒì‹± ë“±ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©

ì¸í„°ì…‰í„°ëŠ” main.jsx ì— ì§ì ‘ ëª…ì‹œí•  ìˆ˜ë„ ìžˆê³ , axios ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ëª…ì‹œí•  ìˆ˜ë„ ìžˆë‹¤.

ì¸í„°ì…‰í„° ì²˜ë¦¬ë¥¼ í•˜ë©´ axios ì½”ë“œë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì¤„ì¼ ìˆ˜ ìžˆë‹¤.

```
const createPost = async (post) => {
    const data = await axios.post(`/posts`, post)
    return data
}
```
